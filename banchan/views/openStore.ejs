<!DOCTYPE html>
<html>
    <head>
    <% include ./layout %>
    </head>
    <body>
    <% include ./topNav %>
    <div class="content">
        <% if ( openError.length > 0 ) { %>
            <strong>Message: <%= openError %></strong>
        <% } %>
        <%= %>
        <!-- 실제 사용시 로 바꿔주세요<input type="text" id="zipNo" name="zipNo" readonly style="width:100px"> -->
        <form method="POST" enctype="multipart/form-data">
            <table>
                <colgroup>
                    <col style="width:20%"><col>
                </colgroup>
                <tbody>
                    <tr>
                        <th>이름</th>
                        <td><input type="text" name="name" value="name"></td>
                    </tr>
                    <tr>
                        <th>url_key</th>
                        <td>
                            <input type="text" id="url_key" name="url_key" value="url_key">
                            <button type="button" onclick="checkUrl_key()">url확인</button>
                        </td>
                    </tr>
                    <tr>
                        <th>introduction</th>
                        <td><input type="textarea" name="introduction" value=""></td>
                    </tr>
                    <tr>
                        <th>커버 사진</th>
                        <td><input type="file" id="img" name="img"></td>
                    </tr>
                    <tr>
                        <th>일반 배송</th>
                        <td><input type="number" name="deliveryFee"></td>
                    </tr>
                    <tr>
                        <th>퀵 배송</th>
                        <td><input type="number" name="quickDeliveryFee"></td>
                    </tr>
                    <tr>
                        <th>우편번호</th>
                        <td>
                            <input type="hidden" id="confmKey" name="confmKey" value=""  >
                            <!-- 실제 사용시 로 바꿔주세요<input type="text" id="zipNo" name="zipNo" readonly style="width:100px"> -->
                            <input type="text" id="zipNo" name="zipNo" style="width:100px">
                            <input type="button"  value="주소검색" onclick="goPopup();">
                        </td>
                    </tr>
                    <tr>
                        <th>전체도로명주소</th>
                        <td><input type="text" id="roadFullAddr" name="roadFullAddr" style="width:85%"></td>
                    </tr>
                    <tr>
                        <th>도로명주소</th>
                        <td><input type="text" id="roadAddrPart1" name="roadAddrPart1" style="width:85%"></td>
                    </tr>
                    <tr>
                        <th>영문도로명주소</th>
                        <td><input type="text" id="engAddr" name="engAddr" style="width:85%"></td>
                    </tr>
                    <tr>
                        <th>상세주소</th>
                        <td>
                            <input type="text" id="addrDetail" name="addrDetail" style="width:40%" value="">
                            <input type="text" id="roadAddrPart2" name="roadAddrPart2"  style="width:40%" value="">
                        </td>
                    </tr>
                    <tr>
                        <th>시도명</th>
                        <td><input type="text" id="siNm" name="siNm" style="width:85%"></td>
                    </tr>
                    <tr>
                        <th>시군구명</th>
                        <td><input type="text" id="sggNm" name="sggNm" style="width:85%"></td>
                    </tr>
                    <tr>
                        <th>읍면동명</th>
                        <td><input type="text" id="emdNm" name="emdNm" style="width:85%"></td>
                    </tr>
                    <tr>
                        <th>도로명</th>
                        <td><input type="text" id="rn" name="rn" style="width:85%"></td>
                    </tr>
                    <tr>
                        <th></th>
                        <td>
                            <button type="submit">submit</button>
                            <button type="reset">reset</button>
                        </td>
                    </tr>
                </tbody>
		    </table>
        </form>
    </div>
    <script>
        function checkUrl_key() {
            var url_key =  document.getElementById('url_key').value;
            var xhr = new XMLHttpRequest();
            xhr.onload = function() {
                if(xhr.status === 200) {
                    var result = JSON.parse(xhr.responseText).result;
                    alert(result);
                } else {
                    console.error(xhr.responseText);
                }
            };
            xhr.open('POST','/store/openStore/checkUrl');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ url_key: url_key }));
        }
        function goPopup(){
	        // 호출된 페이지(jusopopup.jsp)에서 실제 주소검색URL(http://www.juso.go.kr/addrlink/addrLinkUrl.do)를 호출하게 됩니다.
            var pop = window.open("/popup/jusoPopup.jsp","pop","width=570,height=420, scrollbars=yes, resizable=yes");

            // 모바일 웹인 경우, 호출된 페이지(jusopopup.jsp)에서 실제 주소검색URL(http://www.juso.go.kr/addrlink/addrMobileLinkUrl.do)를 호출하게 됩니다.
            //var pop = window.open("/popup/jusoPopup.jsp","pop","scrollbars=yes, resizable=yes");
        }
        /** API 서비스 제공항목 확대 (2017.02) **/
        function jusoCallBack(roadFullAddr,roadAddrPart1,addrDetail,roadAddrPart2,engAddr, jibunAddr, zipNo, admCd, rnMgtSn, bdMgtSn
                                , detBdNmList, bdNm, bdKdcd, siNm, sggNm, emdNm, liNm, rn, udrtYn, buldMnnm, buldSlno, mtYn, lnbrMnnm, lnbrSlno, emdNo){
            // 팝업페이지에서 주소입력한 정보를 받아서, 현 페이지에 정보를 등록합니다.
            document.form.roadFullAddr.value = roadFullAddr;
            document.form.roadAddrPart1.value = roadAddrPart1;
            document.form.engAddr.value = engAddr;
            document.form.siNm.value = siNm;
            document.form.sggNm.value = sggNm;
            document.form.emdNm.value = emdNm;
            document.form.rn.value = rn;
            document.form.roadAddrPart2.value = roadAddrPart2;
            document.form.addrDetail.value = addrDetail;
            document.form.zipNo.value = zipNo;
        }
    </script>
    </body>
</html>
